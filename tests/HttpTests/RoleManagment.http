### Role Management Endpoint Integration Tests
@baseUrl = https://localhost:5001

### 1. Login as Admin and capture accessToken
# @name login
POST {{baseUrl}}/users/login
Content-Type: application/json

{
    "email": "admin@saral.com",
    "password": "Admin123!"
}

###

### 2. Create a new role and capture roleId
# @name createRole
POST {{baseUrl}}/roles
Authorization: Bearer {{login.response.body.accessToken}}
Content-Type: application/json

{
    "name": "TestRole5",
    "description": "Role for integration testing",
    "permissionKeys": [
        "Admin.Dashboard.Read",
        "Admin.UserManagement.Read"
    ]
}

###

### 3. Get all roles
GET {{baseUrl}}/roles
Authorization: Bearer {{login.response.body.accessToken}}

###

### 4. Edit the created role (add more permissions)
PUT {{baseUrl}}/roles
Authorization: Bearer {{login.response.body.accessToken}}
Content-Type: application/json

{
    "roleId": "{{createRole.response.body.roleId}}",
    "name": "TestRoleUpdated2",
    "description": "Updated test role",
    "permissionKeys": [
        "Admin.Dashboard.Read",
        "Admin.UserManagement.Read",
        "Admin.UserManagement.Edit"
    ]
}

###

### 5. Add permissions to the created role
PUT {{baseUrl}}/roles/{{createRole.response.body.roleId}}/permissions
Authorization: Bearer {{login.response.body.accessToken}}
Content-Type: application/json

{
    "permissionKeys": [
        "Admin.UserManagement.Delete"
    ]
}

###

### 6. Delete the created role
DELETE {{baseUrl}}/roles/{{createRole.response.body.roleId}}
Authorization: Bearer {{login.response.body.accessToken}}

###